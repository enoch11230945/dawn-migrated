{%- comment -%}
  AUREA Custom 404 Page
  Beautiful 404 page with search, popular products, and navigation
  
  Usage: Add to templates/404.json as a section
{%- endcomment -%}

<section class="aurea-404" style="padding: 4rem 0; min-height: 60vh; display: flex; align-items: center;">
  <div class="aurea-404__container" style="max-width: 800px; margin: 0 auto; padding: 0 1.5rem; text-align: center;">
    
    {%- comment -%} Icon {%- endcomment -%}
    <div class="aurea-404__icon" style="font-size: 4rem; margin-bottom: 1.5rem; opacity: 0.5;">
      üíé
    </div>
    
    {%- comment -%} Title {%- endcomment -%}
    <h1 class="aurea-404__title" style="font-family: 'Playfair Display', Georgia, serif; font-size: 3rem; font-weight: 400; color: #1A1A1A; margin: 0 0 1rem 0;">
      {{ section.settings.title | default: 'Page Not Found' }}
    </h1>
    
    {%- comment -%} Subtitle {%- endcomment -%}
    <p class="aurea-404__subtitle" style="font-family: 'Cormorant', Georgia, serif; font-size: 1.25rem; color: #666; max-width: 500px; margin: 0 auto 2rem auto; line-height: 1.6;">
      {{ section.settings.subtitle | default: "Oops! The page you're looking for seems to have wandered off. Let us help you find what you need." }}
    </p>
    
    {%- comment -%} Search Bar {%- endcomment -%}
    <form action="{{ routes.search_url }}" method="get" class="aurea-404__search" style="max-width: 400px; margin: 0 auto 2.5rem auto;">
      <div style="display: flex; gap: 0.5rem;">
        <input 
          type="search" 
          name="q" 
          placeholder="Search for products..."
          style="flex: 1; padding: 0.875rem 1rem; border: 1px solid #E5E5E5; border-radius: 4px; font-family: 'Cormorant', Georgia, serif; font-size: 1rem;"
        >
        <button 
          type="submit"
          style="padding: 0.875rem 1.5rem; background: #1A1A1A; color: #fff; border: none; border-radius: 4px; font-family: 'Cormorant', Georgia, serif; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: background 0.3s ease;"
        >
          Search
        </button>
      </div>
    </form>
    
    {%- comment -%} Quick Links {%- endcomment -%}
    <div class="aurea-404__links" style="display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; margin-bottom: 3rem;">
      <a href="/" style="font-family: 'Cormorant', Georgia, serif; font-size: 1rem; color: #B8860B; text-decoration: underline;">
        ‚Üê Back to Home
      </a>
      <a href="/collections/all" style="font-family: 'Cormorant', Georgia, serif; font-size: 1rem; color: #B8860B; text-decoration: underline;">
        Shop All Products
      </a>
      <a href="/pages/contact" style="font-family: 'Cormorant', Georgia, serif; font-size: 1rem; color: #B8860B; text-decoration: underline;">
        Contact Us
      </a>
    </div>
    
    {%- comment -%} Popular Products {%- endcomment -%}
    {%- if section.settings.show_products -%}
      {%- assign featured_collection = collections[section.settings.collection] -%}
      {%- if featured_collection.products.size > 0 -%}
        <div class="aurea-404__products" style="margin-top: 3rem; padding-top: 3rem; border-top: 1px solid #E5E5E5;">
          <h2 style="font-family: 'Playfair Display', Georgia, serif; font-size: 1.5rem; font-weight: 400; color: #1A1A1A; margin: 0 0 1.5rem 0;">
            {{ section.settings.products_title | default: 'Popular Right Now' }}
          </h2>
          
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; max-width: 600px; margin: 0 auto;">
            {%- for product in featured_collection.products limit: 4 -%}
              <a href="{{ product.url }}" style="text-decoration: none; text-align: center;">
                <div style="aspect-ratio: 1; overflow: hidden; border-radius: 4px; margin-bottom: 0.75rem; background: #F5F0E6;">
                  {%- if product.featured_image -%}
                    <img 
                      src="{{ product.featured_image | image_url: width: 300 }}"
                      alt="{{ product.title }}"
                      loading="lazy"
                      style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;"
                      onmouseover="this.style.transform='scale(1.05)'"
                      onmouseout="this.style.transform='scale(1)'"
                    >
                  {%- endif -%}
                </div>
                <h3 style="font-family: 'Cormorant', Georgia, serif; font-size: 0.95rem; color: #1A1A1A; margin: 0 0 0.25rem 0;">
                  {{ product.title | truncate: 30 }}
                </h3>
                <p style="font-family: 'Cormorant', Georgia, serif; font-size: 0.9rem; color: #B8860B; margin: 0;">
                  {{ product.price | money }}
                </p>
              </a>
            {%- endfor -%}
          </div>
        </div>
      {%- endif -%}
    {%- endif -%}
    
  </div>
</section>

{% schema %}
{
  "name": "AUREA 404 Page",
  "tag": "section",
  "class": "section-aurea-404",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Page Not Found"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Oops! The page you're looking for seems to have wandered off. Let us help you find what you need."
    },
    {
      "type": "header",
      "content": "Featured Products"
    },
    {
      "type": "checkbox",
      "id": "show_products",
      "label": "Show Popular Products",
      "default": true
    },
    {
      "type": "text",
      "id": "products_title",
      "label": "Products Section Title",
      "default": "Popular Right Now"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection to Feature"
    }
  ],
  "presets": [
    {
      "name": "AUREA 404 Page"
    }
  ]
}
{% endschema %}
